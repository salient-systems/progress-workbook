<div class="container">
  <div class="row">
  <div class="col-md-12">
    <div class="box">
      <h3><img src="/assets/assessment.png"> {{assessment_type.name}}
        <a ng-show="view1" data-toggle="modal" href="#editRunChartModal" class="btn btn-default btn-xs pull-right"><img class="btn-img-sm" src="/assets/edit.png"> Edit</a>
        <a ng-show="view2" data-toggle="modal" href="#editCriteriaBasedModal" class="btn btn-default btn-xs pull-right"><img class="btn-img-sm" src="/assets/edit.png"> Edit</a>
        <a ng-show="view3" data-toggle="modal" href="#editStandardsBasedModal" class="btn btn-default btn-xs pull-right"><img class="btn-img-sm" src="/assets/edit.png"> Edit</a>
      </h3>
      <p class="text-muted"><a ng-href="#/classes/{{section.id}}">{{section.name}}</a> â€¢ <a ng-href="#/users/{{section.user.id}}">{{section.user.fname}} {{section.user.lname}}</a></p>

      <!--<div resize ng-style="style()" ng-grid="gridOptions" id="var-height-grid"></div>-->
      <br>

      <!-- #1 view -->
      <div ng-show="view1" class="assessment-view">
        <table>
          <thead>
            <th class="assessment1-heading-space">&nbsp;</th>
            <th class="assessment1-heading-space-cover">&nbsp;</th>
            <th class="assessment-relative-left">&nbsp;</th>
            <th ng-repeat="criterion_name in criterions" class="assessment1-criterion-name"><p class="css-vertical-text">{{criterion_name.name}}</p></th>
          </thead>
          <tbody>
            <tr>
              <td>&nbsp;</td>

              <td ng-repeat="criterionGrade in criterions.percent" class="scoreHoriz" ng-style="{background: percentColor(criterionGrade)}">{{criterionGrade}}%</td>
            </tr>
            <tr ng-repeat="student in students" class="assessment1-student" ng-class-odd="'odd'" ng-class-even="'even'">
              <td class="assessment1-student-name"><a href="#/students/{{student.id}}">{{student.fname}} {{student.lname}}</a></td>
              <td class="scoreHorizLeft" ng-style="{background: percentColor(student.percent)}">{{student.percent}}%</td>
              <!--<td ng-repeat="criterion in student.scores" style="border: 1px solid black; width: 45px; height: 30px;">{{criterion.score}}</d>-->
              <td ng-repeat="criterion in student.scores" class="assessment-criterion" ng-style="{background: 'rgba(91,155,213,'+ criterion.score / criterions[$index].max +')'}" >
                <!--<input type="number" class="inputbox assessment-criterion-input" type="text" ng-model="criterion.score" ng-style="{background: 'rgba(0,0,204,'+ criterion.score / criterions[$index].max +')'}" ng-focus="checkVal(criterion)" ng-blur="saveGrade(criterion)"/>-->
                <input class="inputbox assessment-criterion-input" type="text" ng-model="criterion.score" ng-style="{background: 'rgba(0,0,204,0)'}" ng-focus="checkVal(criterion)" ng-blur="saveGrade(criterion)"/>
              </td>
            </tr>
          </tbody>
        </table>
        <div class="table-end"></div>
      </div>

      <!-- #2 view -->
      <div ng-show="view2" class="assessment-view">
        <table>
          <thead>
            <th class="assessment-heading-space-assessment"></th>
            <th class="assessment-heading-space-criterion"></th>
            <th ng-repeat="assessment in assessments" class="assessment1-criterion-name"><p class="css-vertical-text">{{assessment.name}}</p></th>
          </thead>
          <tbody>
            <tr>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td ng-repeat="assessment in assessments" class="scoreHoriz" ng-style="{background: percentColor(assessment.percent)}">{{assessment.percent}}%</td>
            </tr>
            <tr ng-repeat="a in range(domulti(students.length, sizeAssessment[0]))" class="assessment-black-border" ng-class-odd="'odd'" ng-class-even="'even'">
              <td rowspan={{sizeAssessment[0]}} ng-show=showAssessment[domod($index,sizeAssessment[0])] class="assessment-label-row">
                <div class="assessment-relative-position">
                  <p class="css-vertical-text"><a href="#/students/{{student.id}}">{{students[tofloor($index / sizeAssessment[0])].fname}} {{students[tofloor($index / sizeAssessment[0])].lname}}</a></p>
                </div>
              </td>
              <td class="assessment2-criterion-name">{{criterions[$index % sizeAssessment[0]].name}}</td>
              <td ng-repeat="b in range(assessments.length)" class="assessment-criterion" ng-style="{background: 'rgba(91,155,213,'+ students[tofloor($parent.$index / sizeAssessment[0])].scores[domod($parent.$index,sizeAssessment[0]) + $index*sizeAssessment[0]].score / criterions[domod($parent.$index,sizeAssessment[0])].max +')'}">
              <input class="inputbox assessment-criterion-input" type="text" ng-style="{background: 'rgba(0,0,204,0)'}" ng-model="students[tofloor($parent.$index / sizeAssessment[0])].scores[domod($parent.$index,sizeAssessment[0]) + $index*sizeAssessment[0]].score" ng-focus="students[tofloor($parent.$index / sizeAssessment[0])].scores[domod($parent.$index,sizeAssessment[0]) + $index*sizeAssessment[0]]" ng-blur="saveGrade(students[tofloor($parent.$index / sizeAssessment[0])].scores[domod($parent.$index,sizeAssessment[0]) + $index*sizeAssessment[0]])" />
              </td>
            </tr>
          </tbody>
        </table>
        <div class="table-end"></div>
      </div>


      <!-- #3 view -->
      <div ng-show="view3" class="assessment-view">
        <table>
          <thead>
            <th class="assessment-heading-space-name"></th>
            <th class="assessment-heading-space-assessment"></th>
            <th class="assessment-heading-space-criterion"></th>
      <th></th>
            <th ng-repeat="student in students" class="assessment1-criterion-name"><p class="css-vertical-text"><a href="#/students/{{student.id}}">{{student.fname}} {{student.lname}}</a></p></th>
          </thead>
          <tbody>
            <tr>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td>&nbsp;</td>
              <td class="scoreHoriz" ng-style="{background: percentColor(student.percent)}">%</td> <!-- Add overall percentage here -->
              <td ng-repeat="student in students" class="scoreHoriz" ng-style="{background: percentColor(student.percent)}">{{student.percent}}%</td>
            </tr>
          </tbody>
          <tbody ng-repeat="assessment in assessments">
            <tr><td>&nbsp;</td></tr>
            <tr>
              <td class="scoreHoriz" colspan=2 ng-style="{background: percentColor(assessment.percent)}" >{{assessment.percent}}%</td>
              <td class="assessment-label-row">&nbsp;</td>
              <td class="assessment-label-avg">Avg.</td>
              <td class="scoreHoriz" ng-repeat="student in students" ng-style="{background: percentColor(student.assessmentPercent[$parent.$index])}" >{{student.assessmentPercent[$parent.$index]}}%</td>
            </tr>
            <tr ng-repeat="a in range(numOfCrit[$index])" class="assessment-black-border" ng-class-odd="'odd'" ng-class-even="'even'">
              <td rowspan={{sizeAssessment[$index]}} ng-show=showAssessment[$index] class="assessment3-label-subject">
                <p class="css-vertical-text"><strong>{{assessments[$parent.$index].subject}}</strong></p>
              </td>
              <td rowspan={{sizeAssessment[$index]}} ng-show=showAssessment[$index] class="assessment3-label-assessment">
                <p class="css-vertical-text">{{assessments[$parent.$index].name}}</p>
              </td>
              <td class="assessment3-criterion-name">{{criterions[getCritStart($parent.$index) + $index].name}}</td>
              <td class="scoreHoriz" ng-style="{background: percentColor(criterions[getCritStart($parent.$index) + $index].studentPercent)}">{{criterions[getCritStart($parent.$index) + $index].studentAverage}}</td>
              <td ng-repeat="student in students" class="assessment-criterion" ng-style="{background: 'rgba(91,155,213,'+ student.scores[getCritStart($parent.$parent.$index) + $parent.$index].score / criterions[getCritStart($parent.$parent.$index) + $parent.$index].max +')'}">
              <input class="inputbox assessment-criterion-input" type="text" ng-style="{background: 'rgba(0,0,204,0)'}" ng-model="student.scores[getCritStart($parent.$parent.$index) + $parent.$index].score" ng-focus="checkVal(student.scores[getCritStart($parent.$parent.$index) + $parent.$index])" ng-blur="saveGrade(student.scores[getCritStart($parent.$parent.$index) + $parent.$index])" />
              </td>
            </tr>
          </tbody>
        </table>
        <div class="table-end"></div>
      </div>




      <p>
      <!-- Drop-down button -->
<!--     <div class="btn-group">
       <button type="button" class="btn btn-default dropdown-toggle" data-toggle="dropdown">
         Bulk Actions <span class="caret"></span>
       </button>
       <ul class="dropdown-menu" role="menu">
         <li><a href="#">Compare</a></li>
         <li><a data-toggle="modal" href="#addToCohortModal">Add to Cohort</a></li>
         <li><a href="#">Remove from Class</a></li>
       </ul>
     </div>
-->
     <!-- Right-aligned button trigger modal -->
<!--      <a data-toggle="modal" href="#addStudentModal" class="btn btn-default pull-right">Add Student</a>
-->
      <!-- Modal -->
<!--      <div class="modal fade" id="addStudentModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
        <div class="modal-dialog">
          <div class="modal-content">
            <div class="modal-header">
              <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
              <h4 class="modal-title">Add to Class</h4>
            </div>
            <div class="modal-body">
              <input type="search" class="form-control input" placeholder="Search students..." />
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
              <button type="button" class="btn btn-primary">Add</button>
            </div>
          </div>
        </div>
      </div>
   </p>
-->
    <!-- Modal #1-->
    <div ng-controller="EditRunChartCtrl" class="modal fade" id="editRunChartModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
      <div class="modal-dialog">
        <div class="modal-content">
          <!-- head of modal -->
          <div class="modal-header">
            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
            <h4 class="modal-title">Edit Criteria</h4>
          </div>
          <!-- body of modal -->
          <div class="modal-body">
            <form name="dataSetForm" class="form-horizontal" role="form">
              <!-- repeat criterions -->
              <div ng-repeat="criterion in modalCriterions">
                <div class="row">
                   <div class="form-group" >
                     <label for="inputDataType" style="height:11px" class="col-md-3 control-label">Criterion {{$index + 1}}</label>
                     <div class="col-md-5">
                       <input type="text" class="form-control" ng-model="criterion.name" name="name" ng-blur="validateName=true" required>
                     </div>
                     <div class="col-md-3">
                       <input type="text" class="form-control" ng-model="criterion.max" name="name" ng-blur="validateName=true" required>
                     </div>
                     <button type="button" class="btn btn-default btn-xs" ng-click="remove(criterion)"><img style="height:11px" src="/assets/remove.png" align="absmiddle"></button>
                   </div>
                 </div>
               </div>
               <!--<div ng-repeat="newCriterion in newCriterions">
                <div class="row">
                   <div class="form-group" >
                     <label for="inputDataType" style="height:11px" class="col-md-3 control-label">Criterion {{$index + 1}}</label>
                     <div class="col-md-5">
                       <input type="text" class="form-control" ng-model="newCriterion.name" name="name" ng-blur="validateName=true" required>
                     </div>
                     <div class="col-md-3">
                       <input type="text" class="form-control" ng-model="newCriterion.max" name="name" ng-blur="validateName=true" required>
                     </div>
                     <button type="button" class="btn btn-default btn-xs" ng-click="remove(newCriterion)"><img style="height:11px" src="/assets/remove.png" align="absmiddle"></button>
                   </div>
                 </div>
               </div>-->
               <!-- add criterion button -->
               <div class "row">
                 <div class="form-group" >
                     <button type="button" class="btn btn-default btn-xs pull-right" ng-click="newCriterion()"><img style="height:11px" src="/assets/add.png" align="absmiddle"> New Criterion</button>
                 </div>
               </div>
            </form>
          </div>
          <!-- footer of modal -->
          <div class="modal-footer">
            <button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button>
            <button type="button" ng-click="save()" class="btn btn-primary" data-dismiss="modal">Save</button>
          </div>
        </div><!-- /.modal-content -->
      </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->


	  </div>
	</div>
  </div>
</div>